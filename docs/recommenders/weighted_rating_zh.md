# 2. 方法介绍

## 2.1 加权评分方法

### 2.1.1 理论基础
加权评分方法是一种基于影片受欢迎程度的推荐算法，主要解决评分系统中的核心问题：如何在电影平均评分与其获得的评分数量之间取得平衡。

加权评分的核心理念在于：只有少量评分的电影，即使评分很高，其可信度也不如那些评分量大但平均分稍低的电影。同时，不应该仅因为某些电影获得了大量评分就让它们在推荐结果中占据主导地位。

加权评分公式通过综合考虑电影自身评分和整体评分来得出更为客观的结果。该公式涉及的主要参数包括：电影的平均评分（R）、该电影的评分数量（v）、数据集中所有电影的平均评分（C）以及最小评分数量阈值（m）。

加权评分（W）的计算公式为：
\[ W = \frac{v}{v + m} \cdot R + \frac{m}{v + m} \cdot C \]

此公式的含义十分直观：当电影的评分数量（v）较少时，加权评分（W）更接近于全局平均值（C）；当评分数量（v）较多时，加权评分（W）则更接近于该电影自身的平均值（R）。参数m起到了调节作用，它决定了随着评分数量的增加，从依赖全局平均值转向依赖电影自身平均值的转变速度。

### 参数选择与调优

最小评分数量阈值（m）的选择对推荐结果有显著影响。较高的m值会使系统更为保守，倾向于推荐那些评分数量丰富的电影；较低的m值则相对宽松，使新上映或小众电影有更多被推荐的机会。在实际应用中，研究者通常将m设置为评分数量分布的第90或第95百分位，确保只有获得足够评分的电影才能在推荐中占据重要位置。

全局平均值（C）反映了系统中所有评分的整体水平，对于评分数量不足的电影，它提供了一个合理的基准。计算方法为所有电影平均评分的算术平均值：
\[ C = \frac{\sum_{i=1}^{N} r_i}{N} \]
其中$r_i$代表电影$i$的平均评分，$N$是数据集中电影的总数。

### 2.1.2 实现流程
加权评分推荐系统的实现通常遵循以下流程：首先计算所有电影的整体平均评分作为全局平均值C；然后根据数据特征确定最小评分数量阈值m；接着筛选出评分数量不少于m的电影；随后为每部符合条件的电影计算其加权评分；最后按照加权评分对电影进行降序排列，形成最终的推荐列表。

这种方法生成的推荐结果既考虑了电影的质量（平均评分），又兼顾了评价的可靠性（评分数量），从而在推荐系统中实现了更为科学的平衡。相比简单地使用平均评分或评分总数进行排序，加权评分方法能够提供更具参考价值的电影推荐。

### 2.1.3 加权评分曲线

**图2 加权评分随评分数量和电影平均评分的变化曲线**  
![加权评分曲线](../images/weighted_rating.png)

如图2所示，该图展现了不同平均评分（R值分别为2.0、4.0、6.0、8.0和10.0）的电影在评分数量变化时的加权评分趋势。通过分析这些曲线，我们可以得出加权评分公式的三个关键特性：

1. **评分稀少时的稳定性保障**  
   当电影获得的评分数量极少时，所有曲线都趋向于全局平均分5.62。这一设计有效防止了小样本电影因极端评分而获得不合理的高分或低分，为推荐系统提供了稳定的基准线。

2. **随评分增加的个性化转变**  
   随着评分数量的增长，加权评分逐渐偏离全局平均值，更多地反映电影自身的真实质量。当评分数量远超阈值m（160）时，加权评分几乎完全由电影本身的平均分决定，体现了对高置信度样本的充分尊重。

3. **阈值区间的平滑过渡**  
   在评分数量接近阈值m=160的区域，各曲线呈现最大斜率，表明此时每增加一个评分对最终加权结果的影响最为显著。这一区间实现了全局信息与局部特征的平衡融合，使得评分权重在两者之间平滑过渡。

这种加权机制在数学上巧妙地解决了推荐系统中的信任度与差异化之间的矛盾：对于评分不足的新片或小众电影，系统倾向于保守估计；而对于评分充足的热门影片，则充分展现其独特品质。这种平衡策略使得推荐结果既能反映群体共识，又能突显个体特色，为用户提供更加客观、全面的电影推荐。
